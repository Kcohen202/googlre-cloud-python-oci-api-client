dependencies:
  override:
    - pip install --upgrade pip tox tox-pyenv
    # latest as of Nov. 7, 2016: 2.7.12, 3.4.5, 3.5.2
    - pyenv local 2.7.12 3.4.4 3.5.2

test:
  override:
    - python scripts/print_env.py
    - scripts/show_git_status.sh

general:
  branches:
    ignore:
      - gh-pages

deployment:
  release:
    # See "scripts/circleci_tagged_pkg.py" for info on REGEX
    tag: /(([a-z]+)-)*([0-9]+)\.([0-9]+)\.([0-9]+)/
    owner: GoogleCloudPlatform
    commands:
      - pip install --upgrade twine
      - ./scripts/circleci_twine_upload.sh
