[tox]
envlist =
  {py27,py34,py35,py36}-unit
  {py27,py36}-system
  lint
  cover


[testenv]
basepython =
  py27: python2.7
  py34: python3.4
  py35: python3.5
  py36: python3.6

deps =
  mock
  pytest
  pytest-cov
  {toxinidir}/../core
  system: {toxinidir}/../storage
usedevelop = True

commands =
  unit: py.test --quiet \
  unit:  --cov=google.cloud.language --cov tests.unit \
  unit:  --cov-config {toxinidir}/.coveragerc \
  unit:  --cov-append --cov-report= --cov-fail-under=97 \
  unit:  tests/unit
  system: py.test --quiet tests/system.py

passenv =
  CI_*
  CIRCLE*
  GOOGLE_*
  TRAVIS*


[testenv:cover]
basepython = python3.6
deps =
  coverage
  pytest-cov
commands =
  coverage report --show-missing --fail-under=100
  coverage erase


[testenv:lint]
basepython = python3.5
deps =
  flake8
usedevelop = False
commands =
  flake8 google/cloud/language/
